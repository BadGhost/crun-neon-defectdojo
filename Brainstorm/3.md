Of course, I can help you with that\! This is a classic issue when deploying Django applications where the web server isn't able to find and serve the static files (CSS, JavaScript, images) required to render the page correctly.

Based on the screenshot and your repository's code, the unstyled page indicates that the link between the **Cloud Run** service and the **Cloud Storage** bucket holding the static assets is misconfigured.

### The Problem

The core issue lies in how the DefectDojo container is configured to handle static files. A standard Django deployment requires a step where all static files from the application and its dependencies are collected into a single directory. This is typically done by running the command `python manage.py collectstatic`.

In your `modules/cloud_run/main.tf` file, the startup command correctly runs database migrations but is missing the `collectstatic` step. Without this, the static files are never gathered and pushed to the designated Google Cloud Storage bucket, so the load balancer can't serve them to the browser.

### The Solution

To fix this, you need to add the `collectstatic` command to the startup script for your Cloud Run service. This will ensure that all necessary static files are copied to your GCS bucket when the container starts.

Hereâ€™s the step-by-step guide to resolve the issue:

-----

## Step 1: Update the Cloud Run Startup Command

You'll need to modify the `args` section within the `google_cloud_run_v2_service` resource in your `modules/cloud_run/main.tf` file.

**Current Code (`modules/cloud_run/main.tf`):**

```terraform
      # Custom startup command to ensure migrations run
      command = ["/bin/bash"]
      args = ["-c", <<-EOF
        echo "Starting DefectDojo initialization..."
        python manage.py migrate --noinput
        echo "Migrations completed."
        python manage.py loaddata system_settings initial_banner_conf product_type test_type development_environment benchmark_type ||
        echo "Initial data load failed, continuing..."
        echo "Initial data loaded."
        python manage.py shell -c "
from django.contrib.auth import get_user_model
import os
User = get_user_model()
if not User.objects.filter(username='admin').exists():
    User.objects.create_superuser('admin', 'admin@example.com', os.environ['DD_ADMIN_PASSWORD'])
    print('Superuser created')
else:
    print('Superuser already exists')
" ||
        echo "Superuser creation failed, continuing..."
        echo "Starting uWSGI server..."
        exec uwsgi --http 0.0.0.0:8081 --module dojo.wsgi:application --env DD_INITIALIZE=true
      EOF
      ]
```

**Updated Code (`modules/cloud_run/main.tf`):**

Add the `python manage.py collectstatic --noinput` command right after the database migrations.

```terraform
      # Custom startup command to ensure migrations and static files are handled
      command = ["/bin/bash"]
      args = ["-c", <<-EOF
        echo "Starting DefectDojo initialization..."
        python manage.py migrate --noinput
        echo "Migrations completed."
        
        # --- ADD THIS LINE ---
        echo "Collecting static files..."
        python manage.py collectstatic --noinput
        echo "Static files collected."
        # --- END OF ADDITION ---

        python manage.py loaddata system_settings initial_banner_conf product_type test_type development_environment benchmark_type ||
        echo "Initial data load failed, continuing..."
        echo "Initial data loaded."
        python manage.py shell -c "
from django.contrib.auth import get_user_model
import os
User = get_user_model()
if not User.objects.filter(username='admin').exists():
    User.objects.create_superuser('admin', 'admin@example.com', os.environ['DD_ADMIN_PASSWORD'])
    print('Superuser created')
else:
    print('Superuser already exists')
" ||
        echo "Superuser creation failed, continuing..."
        echo "Starting uWSGI server..."
        exec uwsgi --http 0.0.0.0:8081 --module dojo.wsgi:application --env DD_INITIALIZE=true
      EOF
      ]
```

-----

## Step 2: Verify CORS Settings on the Storage Bucket

Your `modules/storage/main.tf` already has a correct CORS configuration, which is essential. This allows the browser to load resources (like CSS) from the storage bucket domain. No changes are needed here, but it's good to confirm.

```terraform
  # CORS settings for web access
  cors {
    origin          = ["*"]
    method          = ["GET", "HEAD", "PUT", "POST", "DELETE"]
    response_header = ["*"]
    max_age_seconds = 3600
  }
```

-----

## Step 3: Redeploy the Infrastructure

After updating the `modules/cloud_run/main.tf` file, you need to apply the changes using Terraform.

1.  **Navigate to your project directory** in your terminal.
2.  **Run `terraform plan`** to see the planned changes. It should show a modification to the `google_cloud_run_v2_service`.
    ```bash
    terraform plan
    ```
3.  **Apply the changes**.
    ```bash
    terraform apply
    ```

Once the deployment is complete, the new Cloud Run revision will execute the `collectstatic` command, populating your GCS bucket with the required CSS and JS files. Your DefectDojo interface should then render correctly.

Let me know if you have any other questions\!